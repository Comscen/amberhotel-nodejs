<!DOCTYPE html>
<html>

<%- include("partials/header.ejs") %>

<body>

    <%- include("partials/nav.ejs") %>

    <div class="container">
        <div class="row">

            <div class="col-md-12">
            <% if (typeof messages != 'undefined') { %>
                <% for (message of messages) { %>
                        <div class="alert alert-success" role="alert" style="margin-top: 16px;"><span><%= message.msg %></span></div>
                    <% } %>
            <% } %>

            <% if (typeof errors != 'undefined') { %>
                <% for (error of errors) { %>
                        <div class="alert alert-danger" role="alert" style="margin-top: 16px;"><span><%= error.msg %></span></div>
                <% } %>
            <% } %>
            </div>
            
            <div class="col-md-12 text-center account-info" style="padding-top: 5px; padding-bottom: 5px">
                <div class="card" style="border: 0px">
                    <div class="card-header" style="background-color: white;">
                        <ul class="nav nav-tabs card-header-tabs">
                            <li class="nav-item">
                                <a href="#" class="nav-link active" style="border: 1px solid #dee2e6; border-radius: 5%;">Info</a>
                            </li>
                            <li class="nav-item">
                                <a href="/account/<%= user._id %>/edit/password" class="nav-link" style="color: rgb(224,116,37)">Password</a>
                            </li>
                        </ul>
                    <div class="card-body">
                        <div class="table-responsive text-left">
                            <form method="post" onsubmit = "return validateForm(this)">
                                <table class="table">
                                    <thead>
                                        <tr></tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td style="width: 250px;">Name</td>
                                            <td><input name="name" type="text" value="<%= user.name %>" oninput="isFieldValid(this)" class="form-control" placeholder="Your name">
                                                <small id="nameError" class="form-text text-muted" style="display: none;">Max 50 characters without symbols or numbers.</small>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Surname</td>
                                            <td><input name="surname" type="text" value="<%= user.surname %>" oninput="isFieldValid(this)" class="form-control" placeholder="Your surname">
                                                <small id="surnameError" class="form-text text-muted" style="display: none;">Max 50 characters without symbols or numbers.</small>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>E-mail address</td>
                                            <td><input name="email" type="text" value="<%= user.email %>" oninput="isFieldValid(this)" class="form-control" placeholder="Your e-mail address">
                                                <small id="emailError" class="form-text text-muted" style="display: none;">Provided e-mail address is invalid.</small>
                                            </td>
                                        </tr>
                                    
                                        <% if (typeof user.location == 'undefined') { %>
                                            <tr>
                                                <td>Location</td>
                                                <td><input name="location" type="text" class="form-control" placeholder="ex. Paris, France"></td>
                                            </tr>
                                        <% } else { %>
                                            <tr>
                                                <td>Location</td>
                                                <td><input name="location" type="text" value="<%= user.location %>" class="form-control" placeholder="ex. Paris, France"></td>
                                            </tr>
                                        <% } %>
                                        
                                        <% if (typeof user.photo == 'undefined') { %>
                                            <tr>
                                                <td>Photo URL</td>
                                                <td><input name="photo" type="text" class="form-control" placeholder="Photo URL"></td>
                                            </tr>
                                        <% } else { %>
                                            <tr>
                                                <td>Photo URL</td>
                                                <td><input name="photo" type="text" value="<%= user.photo %>" class="form-control" placeholder="Photo URL"></td>
                                            </tr>
                                        <% } %>
                                        <!-- <tr>
                                            <td>Current password</td>
                                            <td><input name="oldPassword" type="text" class="form-control" placeholder="Current password"></td>
                                        </tr> -->
                                        <!-- <tr>
                                            <td>New password</td>
                                            <td><input name="password" type="text" oninput="isFieldValid(this)" class="form-control" placeholder="New password">
                                                <small id="passwordError" class="form-text text-muted" style="display: none;">5-30 characters long with at least one small letter, one big letter and one number.</small>
                                            </td>
                                        </tr> -->
                                        <tr>
                                            <td></td>
                                            <td>
                                                <!-- <input name="repeatPassword" class="form-control" type="text" placeholder="Repeat new password"> -->
                                                <!-- <small id="repeatPasswordError" class="form-text text-muted" style="display: none;">Passwords do not match</small> -->
                                                <input type="submit" value="Save profile" oninput="doPasswordsMatch(this)" class="btn btn-primary btn-sm float-right" style="background: rgb(224,116,37);">
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </form>
                        </div>
                    </div>
                    </div>
                </div>
            </div>
            
        </div>
    </div>

    <script src="/js/basicValidation.js" type="application/javascript"></script>

    <%- include("partials/footer.ejs") %>
    <%- include("partials/scripts.ejs") %>

</body>

</html>